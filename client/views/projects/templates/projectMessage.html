<template name="projectMessage">
  <div id="content" class="clearfix layout-fixed-width">
    <div class="clearfix wrapper">
        <header id="page-title">
            {{was}}
            <h1 class="title">Negotiations</h1>
            <h2 class="subtitle">Form a legally binding contract between {{userName}} and campaign "{{project.title}}"</h2>
            <p>&nbsp;</p>
            <div class="krown-column-row clearfix">
              <div class="krown-column-container clearfix first span12 clearfix">
                <section class="krown-box light-1 clearfix">
                <h4>AUDITION SPECIFICATIONS</h4>
                <h6>CAMPAIGN AUTHORS MAY REQUEST ADDITIONAL AUDITIONS OR SPECIFICATIONS IN THE COMMUNICATIONS BELOW</h6>
                <table class="table table-striped table-responsive">
                  <thead>
                    <tr>
                      <th>role</th>
                      <th>request</th>
                      <th>URL of audition video</th>
                    </tr>
                  </thead>
                  <tbody>
                  {{#each auditions}}
                    <tr>
                      <td>{{title}}</td>
                      <td>{{audition}}</td>
                      <td>
                        <div class="form-group">
                            <input type="text" class="form-control auditionURL" id="url{{@index}}" placeholder="{{url}}">
                        </div>
                      </td>
                    </tr>
                  {{else}}
                    <tr><td colspan="3">NONE</td></tr>
                  {{/each}}
                  </tbody>
                </table>
                </section>
              </div>
            </div>
            
            <div class="krown-column-row clearfix">
              <div class="krown-column-container clearfix first last span12 clearfix">
                <h3>FINAL OFFER</h3>
                <p class="h5">Negotiate with applicant and form agreement. Make changes to the fields, and they will save automatically. <strong>Submit only after your negotiations are completed</strong>.</p>
                <div class="krown-accordion accordion large clearfix">
                    <section>
                        <h5>ROLES</h5>
                        <div style="display:block">
                            <h4>List of roles this user is accepted to perform.</h4>
                            <div class="krown-column-row clearfix">
                              <div class="krown-column-container clearfix first span12 clearfix">
                                <section class="krown-box light-1 clearfix">
                                <h4>OFFER</h4>
                                <table class="table table-striped table-responsive">
                                  <thead>
                                    <tr>
                                      <th>type of offer</th>
                                      <th>consideration</th>
                                      {{#if ownerInitAgreement}}
                                      <th>approve or decline</th>
                                      {{/if}}
                                    </tr>
                                  </thead>
                                  <tbody>
                                  {{#each offers}}
                                    {{>projectMessageOffer}}
                                  {{else}}
                                    <tr>NO OFFERS TO SHOW</tr>
                                  {{/each}}
                                  </tbody>
                                </table>
                                </section>
                              </div>
                            </div>
                        </div>
                    </section>
                    <section>
                        <h5>TERMS</h5>
                        <div style="display:block">
                            <h4>Define the essential performance terms expected from this member.</h4>
                            <textarea id="negotiationTerms" style="{{#unless ownerInitAgreement}}pointer-events:none{{/unless}}">{{negotiationTerms}}</textarea>
                        </div>
                    </section>
                    <section>
                        <h5>DAMAGES</h5>
                        <div style="display:block">
                            <h4>Specific outcomes in case the member purposely fails to perform.</h4>
                            <textarea id="negotiationDamages" style="{{#unless ownerInitAgreement}}pointer-events:none{{/unless}}">{{negotiationDamages}}</textarea>
                        </div>
                    </section>
                    <section>
                        <h5>FINANCIAL</h5>
                        <div style="display:block">
                            <div class="form-group">
                              <label for="financials"><strong>How much pay for the role in USD.</strong></label>
                              <input type="number" class="form-control" id="financials" value="{{negotiationFinancial}}" style="{{#unless ownerInitAgreement}}pointer-events:none{{/unless}}">
                          </div>
                        </div>
                    </section>
                    <section>
                        <h5>EQUITY</h5>
                        <div style="display:block">
                            <div class="form-group">
                              <label for="equities"><strong>How many shares of the campaign.</strong></label>
                              <input type="number" class="form-control" id="equities" value="{{negotiationEquities}}" style="{{#unless ownerInitAgreement}}pointer-events:none{{/unless}}">
                              {{#if isProjectOwner}}
                              <p class="lead">{{sharesAvailable}} shares available</p>
                              <p><small>shares updated only after finalization of agreement</small></p>
                              {{/if}}
                          </div>
                        </div>
                    </section>
                </div>
              </div>
            </div>
            
            <p>&nbsp;</p>
            {{#if ownerInitAgreement}}
            <div class="krown-column-row clearfix margin_bottom40">
                <div class="krown-column-container clearfix last span12 clearfix">
                    <section class="krown-box color clearfix"><a class="btn btn-block btn-danger btn-lg" style="    white-space: normal!important;word-wrap:break-word!important;" id="authorinitk">SELECT HERE TO MAKE OFFER WITH ABOVE SPECIFICATIONS</a></section>
                </div>
            </div>
            {{/if}}

            {{#if ownerInitAgreementAplicantNote}}
              <p class="h6">author must initiate offer, please communicate with messages below</p>
            {{/if}}

            {{#if applicantRequestCounter}}
            <div class="krown-column-row clearfix margin_bottom40">
                <div class="krown-column-container clearfix last span12 clearfix">
                    <section class="krown-box clearfix">
                      the campaign author has made an offer detailed above, you may accept their offer to be finalized or negotiate in the communications; if you would like to renegotiate please select "counter-offer", however there is no guarantee the campaign author will accept your counter offer
                    </section>
                </div>
                <div class="krown-column-container clearfix last span6 clearfix">
                    <section class="krown-box color clearfix"><a class="btn btn-block btn-danger btn-lg" style="    white-space: normal!important;word-wrap:break-word!important;" id="applicantverifyk">SELECT HERE TO ACCEPT THIS OFFER</a></section>
                </div>

                <div class="krown-column-container clearfix last span6 clearfix">
                    <section class="krown-box color clearfix"><a class="btn btn-block btn-default btn-lg" style="    white-space: normal!important;word-wrap:break-word!important;" id="applicantcounterk">SELECT HERE TO REJECT &amp; COUNTER-OFFER</a></section>
                </div>
            </div>
            {{/if}}

            {{#if applicantRequestCounterAuthorNote}}
              <p class="h6">applicant is in process of accepting or countering offer, counters are communicated in messages below</p>
            {{/if}}

            {{#if authorNeedsFinishAgreement}}
            <div class="krown-column-row clearfix margin_bottom40">
              <div class="krown-column-container clearfix last span12 clearfix">
                  <section class="krown-box color clearfix"><a class="btn btn-block btn-danger btn-lg" style="    white-space: normal!important;word-wrap:break-word!important;" id="authorfinalizek">SELECT HERE TO FINALIZE AND ACCEPT APPLICANT TO THIS CAMPAIGN</a></section>
              </div>
            </div>
            {{/if}}

            {{#if authorNeedsFinishAgreementApplicantNote}}
              <p class="h6">author needs to finalize and sign off the offer, once completed you will be notified and you will be able to find this campaign in your list of active campaigns</p>
            {{/if}}
            
        </header>
        <div class="normal-content no-boxed">
          <div class="krown-column-row clearfix">
            {{#each messages}}
              <div class="krown-column-container clearfix first span12 clearfix">
                  <section class="krown-box light-1 clearfix">
                    {{> comment}}
                  </section>
              </div>
            {{/each}}
          </div>
          <div class="krown-column-row clearfix">
            {{> messageBox}}
          </div>
        </div>
    </div>
  </div>
  <script src="/js/scripts.min.js" defer></script>
</template>

<template name="projectMessageOffer">
  <tr>
    <td style="text-decoration:{{approveOrDenyTextDecoration}}">{{considerationType}}</td>
    <td style="text-decoration:{{approveOrDenyTextDecoration}}">{{considerationItself}}</td>
    {{#if isEditable}}
    <td class="center"><button class="approvedeny button" style="width:100%;background-color:{{approveOrDenyButton}}"><span class="glyphicon glyphicon-{{approveOrDenyButtonText}}"></span>&nbsp;&nbsp;{{approveOrDenyButtonTextReadable}}</button></td>
    {{/if}}
  </tr>
</template>

<template name="projectMessagePayment">

</template>